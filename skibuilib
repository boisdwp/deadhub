-- UI Library for Roblox (Cleaner Version)
local UI_Lib = {}

-- Helper function to create a new UI component
function UI_Lib:CreateElement(parent, class, properties)
    local element = Instance.new(class)
    for property, value in pairs(properties) do
        element[property] = value
    end
    element.Parent = parent
    return element
end

-- Create a Window
function UI_Lib:CreateWindow(title, width, height)
    -- Create the main window
    local window = self:CreateElement(game.Players.LocalPlayer.PlayerGui, "ScreenGui", {
        Name = title
    })

    local frame = self:CreateElement(window, "Frame", {
        Size = UDim2.new(0, width, 0, height),
        Position = UDim2.new(0.5, -width/2, 0.5, -height/2),
        BackgroundColor3 = Color3.fromRGB(30, 30, 30),
        BorderSizePixel = 0,
        CornerRadius = UDim.new(0, 10)
    })

    -- Title Bar
    local titleBar = self:CreateElement(frame, "TextLabel", {
        Size = UDim2.new(1, 0, 0, 30),
        Position = UDim2.new(0, 0, 0, 0),
        Text = title,
        BackgroundColor3 = Color3.fromRGB(50, 50, 50),
        TextColor3 = Color3.fromRGB(255, 255, 255),
        TextSize = 18,
        TextStrokeTransparency = 0.8,
        TextBold = true
    })

    return window, frame
end

-- Create a Button
function UI_Lib:CreateButton(parent, label, callback)
    local button = self:CreateElement(parent, "TextButton", {
        Size = UDim2.new(0, 180, 0, 40),
        Position = UDim2.new(0.5, -90, 0.5, 40),
        Text = label,
        BackgroundColor3 = Color3.fromRGB(60, 60, 60),
        TextColor3 = Color3.fromRGB(255, 255, 255),
        TextSize = 16,
        BorderSizePixel = 2,
        BorderColor3 = Color3.fromRGB(255, 255, 255),
        Font = Enum.Font.GothamBold,
        TextStrokeTransparency = 0.8
    })
    button.MouseButton1Click:Connect(callback)
    return button
end

-- Create a Close Button
function UI_Lib:CreateCloseButton(window)
    local closeButton = self:CreateElement(window, "TextButton", {
        Size = UDim2.new(0, 50, 0, 30),
        Position = UDim2.new(1, -50, 0, 0),
        Text = "X",
        BackgroundColor3 = Color3.fromRGB(255, 0, 0),
        TextColor3 = Color3.fromRGB(255, 255, 255),
        Font = Enum.Font.GothamBold,
        TextSize = 16
    })
    closeButton.MouseButton1Click:Connect(function()
        window:Destroy()
    end)
end

-- Create a Minimize Button
function UI_Lib:CreateMinimizeButton(window, frame)
    local minimizeButton = self:CreateElement(window, "TextButton", {
        Size = UDim2.new(0, 50, 0, 30),
        Position = UDim2.new(1, -100, 0, 0),
        Text = "_",
        BackgroundColor3 = Color3.fromRGB(50, 50, 50),
        TextColor3 = Color3.fromRGB(255, 255, 255),
        Font = Enum.Font.GothamBold,
        TextSize = 16
    })
    minimizeButton.MouseButton1Click:Connect(function()
        frame.Visible = not frame.Visible
    end)
end

-- Add Keybind to Toggle Window Visibility
function UI_Lib:AddKeybindToToggle(window, key)
    local userInputService = game:GetService("UserInputService")
    userInputService.InputBegan:Connect(function(input, gameProcessed)
        if gameProcessed then return end
        if input.KeyCode == key then
            window.Visible = not window.Visible
        end
    end)
end

return UI_Lib
